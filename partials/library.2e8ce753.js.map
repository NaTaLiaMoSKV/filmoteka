{"mappings":"8pBAsBA,IAAAA,EACAC,E,iJArBA,IAAIC,EAAU,GAoBdF,EAlBA,SAAkBG,GAGhB,IAFA,IAAIC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BJ,EAAQE,EAAKE,IAAMH,EAAMC,EAAKE,G,EAelCL,EAXA,SAAiBO,GACf,IAAIC,EAAWP,EAAQM,GAEvB,GAAgB,MAAZC,EACF,MAAM,IAAIC,MAAM,oCAAsCF,GAGxD,OAAOC,C,uCC2BT,IAAAE,E,6EA5CA,IAAIC,EAAY,GA6BhB,SAASC,EAAWC,GAClB,OAAQ,GAAKA,GAAKC,QAAO,+DAAiE,MAAQ,G,CAcpGJ,EA1CA,SAA4BH,GAC1B,IAAIQ,EAAQJ,EAAUJ,GAOtB,OALKQ,IACHA,EAOJ,WACE,IACE,MAAM,IAAIN,K,CACV,MAAOO,GACP,IAAIC,GAAW,GAAKD,EAAIE,OAAOC,MAAK,yDAEpC,GAAIF,EAGF,OAAOL,EAAWK,EAAQ,G,CAI9B,MAAO,G,CApBGG,GACRT,EAAUJ,GAAMQ,GAGXA,C,KCZTM,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,sJCAzD,I,EAAAC,EAAAJ,EAAA,S,0BCAAK,EAAiBL,EAAA,SAAAM,aAA6C,SAAW,MAAQN,EAAA,SAAAO,QAA6C,SDK9H,IAAMC,EAAqB,IAAI,EAAAJ,EAAAK,mBAAkB,wBAE3CC,EAAcC,SAASC,cAAc,cACrCC,EAAaF,SAASC,cAAc,mBACpCE,EAAWH,SAASC,cAAc,iBAExC,SAASG,EAA6BC,GACpCC,aAAaC,QAAQ,cAAeF,E,CAyBtC,SAASG,EAAkBC,GAIvB,GAHAN,EAASO,UAAUC,OAAO,YAC1BT,EAAWQ,UAAUE,IAAI,YAEI,IAAzBC,EAAAC,cAAcxC,OAAc,CAC5B,IAAMyC,EAAoBF,EAAAG,+BAA0C,WACpEjB,EAAYkB,UAAYF,C,MACrBG,EAAUL,EAAAC,cAAe,U,CAGpC,SAASK,EAAgBV,GAIrB,GAHAP,EAAWQ,UAAUC,OAAO,YAC5BR,EAASO,UAAUE,IAAI,YAEI,IAAvBC,EAAAO,YAAY9C,OAAc,CAC1B,IAAMyC,EAAoBF,EAAAG,+BAA0C,SACpEjB,EAAYkB,UAAYF,C,MACrBG,EAAUL,EAAAO,YAAa,Q,CAGlC,SAASF,EAAUG,EAAMhB,GAmCrBN,EAAYkB,UAAY,GAjCxBpB,EAAmByB,YAEnBD,EAAKE,SAAQ,SAAAC,GACT3B,EAAmB4B,uBAAuBD,E,IAG9C,IAAME,EAAmCL,EAM3BM,KAAI,SAACC,GACf,IAAIC,EAASD,EAAMC,OACfD,EAAMC,OAAOvD,OAAS,IACtBuD,EAAS,GAAuBC,OAApBF,EAAMC,OAAO,GAAG,MAAoBC,OAAhBF,EAAMC,OAAO,GAAG,YAEpD,IAAME,EAAe,IAAIC,KAAKJ,EAAMG,cAC9BE,EAASL,EAAMM,YAAc,sCAAwDJ,OAAlBF,EAAMM,aAAgBC,EAAAzC,GAC/F,MAAO,0CAEYoC,OADYF,EAAMrD,GAAG,gDACGuD,OAAxBG,EAAO,mBAEiBH,OAFAF,EAAMQ,MAAM,sJAGfN,OADGF,EAAMQ,MAAM,wDAELN,OADVD,EAAO,8DAC2DC,OAAxDC,EAAaM,cAAc,+BAA2DP,OAA9BF,EAAMU,aAAaC,QAAQ,GAAG,mE,IAIzIC,KAAK,IAtBRzC,EAAYkB,UAAYS,EACxBb,EAAA4B,mBAA8B5C,EAAoBQ,E,CA9CpC,UALTC,aAAaoC,QAAQ,eAM1BvB,IAEAX,IAGJN,EAAWyC,iBAAiB,SAAS,WACjCnC,IACAJ,EAA6B,U,IAGjCD,EAASwC,iBAAiB,SAAS,WAC/BxB,IACAf,EAA6B,Q","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-d5a004b92e791fe5.js","src/js/library.js","node_modules/@parcel/runtime-js/lib/runtime-c06c8a936dec97c1.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"jNRdE\\\":\\\"library.2e8ce753.js\\\",\\\"f3HWd\\\":\\\"not-found.8cc15053.jpg\\\",\\\"c4yW3\\\":\\\"library.fbc4a8e8.js\\\"}\"));","import { LocalStorageEntry } from \"./local-storage-entry\";\nimport { watchedMovies, queueMovies } from \"./modal-window\";\nimport * as modalUtils from \"./modal-window\";\nimport imageNotFound from '../images/not-found.jpg'\n\nconst currentLibraryPage = new LocalStorageEntry('Current library page');\n\nconst galleryList = document.querySelector('ul.gallery');\nconst watchedBtn = document.querySelector('.js-watched-btn');\nconst queueBtn = document.querySelector('.js-queue-btn');\n\nfunction setCurrentModeToLocalStorage(mode) {\n  localStorage.setItem('currentMode', mode);\n}\n\nfunction getCurrentModeFromLocalStorage() {\n  return localStorage.getItem('currentMode');\n}\n\nconst savedMode = getCurrentModeFromLocalStorage();\n\nif (savedMode === 'queue') {\n    onQueueBtnClick();\n} else {\n    onWatchedBtnClick();\n}\n\nwatchedBtn.addEventListener('click', () => {\n    onWatchedBtnClick();\n    setCurrentModeToLocalStorage('watched'); \n});\n\nqueueBtn.addEventListener('click', () => {\n    onQueueBtnClick();\n    setCurrentModeToLocalStorage('queue');\n});\n\nfunction onWatchedBtnClick(e) {\n    queueBtn.classList.remove('on-focus');\n    watchedBtn.classList.add('on-focus');\n    \n    if (watchedMovies.length === 0) {\n        const placeholderMarkup = modalUtils.createLibraryPlaceholderMarkup('watched');\n        galleryList.innerHTML = placeholderMarkup;\n    } else addMovies(watchedMovies, 'watched');\n}\n\nfunction onQueueBtnClick(e) {\n    watchedBtn.classList.remove('on-focus');\n    queueBtn.classList.add('on-focus');\n\n    if (queueMovies.length === 0) {\n        const placeholderMarkup = modalUtils.createLibraryPlaceholderMarkup('queue');\n        galleryList.innerHTML = placeholderMarkup;\n    } else addMovies(queueMovies, 'queue');\n}\n\nfunction addMovies(list, mode) {\n    clearGalleryList();\n    currentLibraryPage.clearList();\n\n    list.forEach(item => {\n        currentLibraryPage.addMovieToLocalStorage(item);\n    });\n\n    const markup = createGalleryMoviesMarkup(list);\n    galleryList.innerHTML = markup;\n    modalUtils.handleGalleryCards(currentLibraryPage, mode);\n}\n\nfunction createGalleryMoviesMarkup(movies) {\n    return movies.map((movie) => {\n        let genres = movie.genres;\n        if (movie.genres.length > 2) {\n            genres = `${movie.genres[0]}, ${movie.genres[1]}, Other`;\n        };\n        const release_date = new Date(movie.release_date);\n        const poster = movie.poster_path ? `https://image.tmdb.org/t/p/original${movie.poster_path}` : imageNotFound;\n        return `\n            <li class=\"card\" data-id=${movie.id} data-modal-open>\n                <img src=${poster} alt=\"Poster \\'${movie.title}\\'\" class=\"card__movie-img\" width=\"200\" height=\"300\">\n                <div class=\"card__info\">\n                    <p class=\"card__movie-title\">${movie.title}</p>\n                    <p class=\"card__add-info\">${genres}\n                    <span class=\"card__span\"> | </span> ${release_date.getFullYear()} <span class=\"value__vote\">${movie.vote_average.toFixed(1)}</span></p>\n                </div>\n            </li>\n        `;\n    }).join('');\n}\n\nfunction clearGalleryList() {\n    galleryList.innerHTML = '';\n}\nexport { createGalleryMoviesMarkup };","module.exports = require('./helpers/bundle-url').getBundleURL('jNRdE') + \"../\" + require('./helpers/bundle-manifest').resolve(\"f3HWd\");"],"names":["$0380ce8f1f064ccc$export$6503ec6e8aabbaf","$0380ce8f1f064ccc$export$f7ad0328861e2f03","$0380ce8f1f064ccc$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$7dd1ddf6834435ca$export$bdfd709ae4826697","$7dd1ddf6834435ca$var$bundleURL","$7dd1ddf6834435ca$var$getBaseURL","url","replace","value","err","matches","stack","match","$7dd1ddf6834435ca$var$getBundleURL","parcelRequire","register","JSON","parse","$gn8gO","$b8007d76d69f2a29$exports","getBundleURL","resolve","$93effc6fc56091ad$var$currentLibraryPage","LocalStorageEntry","$93effc6fc56091ad$var$galleryList","document","querySelector","$93effc6fc56091ad$var$watchedBtn","$93effc6fc56091ad$var$queueBtn","$93effc6fc56091ad$var$setCurrentModeToLocalStorage","mode","localStorage","setItem","$93effc6fc56091ad$var$onWatchedBtnClick","e","classList","remove","add","$6VMVE","watchedMovies","placeholderMarkup","createLibraryPlaceholderMarkup","innerHTML","$93effc6fc56091ad$var$addMovies","$93effc6fc56091ad$var$onQueueBtnClick","queueMovies","list","clearList","forEach","item","addMovieToLocalStorage","markup","map","movie","genres","concat","release_date","Date","poster","poster_path","$parcel$interopDefault","title","getFullYear","vote_average","toFixed","join","handleGalleryCards","getItem","addEventListener"],"version":3,"file":"library.2e8ce753.js.map"}