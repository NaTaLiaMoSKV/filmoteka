{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,0BAIA,MAAMC,EAAqB,IAAI,EAAAF,EAAAG,mBAAkB,wBAG3CC,EAAcC,SAASC,cAAc,cACrCC,EAAaF,SAASC,cAAc,mBACpCE,EAAWH,SAASC,cAAc,iBAWxC,SAASG,EAAkBC,GACvBF,EAASG,UAAUC,OAAO,YAC1BL,EAAWI,UAAUE,IAAI,YACzBC,EAAUC,EAAAC,cAAe,U,CAG7B,SAASC,EAAgBP,GACrBH,EAAWI,UAAUC,OAAO,YAC5BJ,EAASG,UAAUE,IAAI,YACvBC,EAAUC,EAAAG,YAAa,Q,CAG3B,SAASJ,EAAUK,EAAYC,GA+B3BhB,EAAYiB,UAAY,GA7BxBnB,EAAmBoB,YACnBpB,EAAmBqB,uBAAuBJ,GAC1C,MAAMK,EAAmCL,EAO3BM,KAAKC,IACf,IAAIC,EAASD,EAAMC,OACfD,EAAMC,OAAOC,OAAS,IACtBD,EAAS,GAAGD,EAAMC,OAAO,OAAOD,EAAMC,OAAO,aAEjD,MAAME,EAAe,IAAIC,KAAKJ,EAAMG,cACpC,MAAO,2CACyBH,EAAMK,sFACiBL,EAAMM,6BAA8BN,EAAMO,yJAEtDP,EAAMO,4DACTN,8DACUE,EAAaK,2CAA2CR,EAAMS,aAAaC,QAAQ,oEAGpI,IACFC,KAAK,IAtBRjC,EAAYiB,UAAYG,EACxBT,EAAAuB,mBAA8BpC,EAAoBkB,E,CAtBlDb,EAAWgC,iBAAiB,QAAS9B,GACrCD,EAAS+B,iBAAiB,QAAStB,GAJvCR","sources":["src/js/library.js"],"sourcesContent":["import { LocalStorageEntry } from \"./local-storage-entry\";\nimport { watchedMovies, queueMovies } from \"./modal-window\";\nimport * as modalUtils from \"./modal-window\";\n\nconst currentLibraryPage = new LocalStorageEntry('Current library page');\n\n\nconst galleryList = document.querySelector('ul.gallery');\nconst watchedBtn = document.querySelector('.js-watched-btn');\nconst queueBtn = document.querySelector('.js-queue-btn');\n\n\nonLibraryLoad();\nonWatchedBtnClick();\n\nfunction onLibraryLoad() {\n    watchedBtn.addEventListener('click', onWatchedBtnClick);\n    queueBtn.addEventListener('click', onQueueBtnClick);\n}\n\nfunction onWatchedBtnClick(e) {\n    queueBtn.classList.remove('on-focus');\n    watchedBtn.classList.add('on-focus');\n    addMovies(watchedMovies, 'watched');\n}\n\nfunction onQueueBtnClick(e) {\n    watchedBtn.classList.remove('on-focus');\n    queueBtn.classList.add('on-focus');\n    addMovies(queueMovies, 'queue');\n}\n\nfunction addMovies(moviesList, modeStr) {\n    clearGalleryList();\n    currentLibraryPage.clearList();\n    currentLibraryPage.addMovieToLocalStorage(moviesList);\n    const markup = createGalleryMoviesMarkup(moviesList);\n    galleryList.innerHTML = markup;\n    modalUtils.handleGalleryCards(currentLibraryPage, modeStr);\n}\n\n\nfunction createGalleryMoviesMarkup(movies) {\n    return movies.map((movie) => {\n        let genres = movie.genres;\n        if (movie.genres.length > 2) {\n            genres = `${movie.genres[0]}, ${movie.genres[1]}, Other`;\n        };\n        const release_date = new Date(movie.release_date)\n        return `\n            <li class=\"card\" data-id=\"${movie.id}\" data-modal-open>\n                <img src=\"https://image.tmdb.org/t/p/original${movie.poster_path}\" alt=\"Poster \\'${movie.title}\\'\" class=\"card__movie-img\" width=\"200\" height=\"300\">\n                <div class=\"card__info\">\n                    <p class=\"card__movie-title\">${movie.title}</p>\n                    <p class=\"card__add-info\">${genres}\n                    <span class=\"card__span\"> | </span> ${release_date.getFullYear()} <span class=\"value__vote\">${movie.vote_average.toFixed(1)}</span></p>\n                </div>\n            </li>\n        `;\n    }).join('');\n}\n\nfunction clearGalleryList() {\n    galleryList.innerHTML = '';\n}\n"],"names":["$2GrvB","parcelRequire","$1cafa503bc57b7a0$var$currentLibraryPage","LocalStorageEntry","$1cafa503bc57b7a0$var$galleryList","document","querySelector","$1cafa503bc57b7a0$var$watchedBtn","$1cafa503bc57b7a0$var$queueBtn","$1cafa503bc57b7a0$var$onWatchedBtnClick","e","classList","remove","add","$1cafa503bc57b7a0$var$addMovies","$2hTmC","watchedMovies","$1cafa503bc57b7a0$var$onQueueBtnClick","queueMovies","moviesList","modeStr","innerHTML","clearList","addMovieToLocalStorage","markup","map","movie","genres","length","release_date","Date","id","poster_path","title","getFullYear","vote_average","toFixed","join","handleGalleryCards","addEventListener"],"version":3,"file":"library.195b617c.js.map"}