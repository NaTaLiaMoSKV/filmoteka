{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,S,aAOMC,G,aAAqB,IAAI,EAAAF,EAAAG,mBAAkB,yBAG3CC,EAAcC,SAASC,cAAc,cACrCC,EAAaF,SAASC,cAAc,mBACpCE,EAAWH,SAASC,cAAc,iBAWxC,SAASG,EAAkBC,GAEvBF,EAASG,UAAUC,OAAO,YAC1BL,EAAWI,UAAUE,IAAI,YACzBC,EAAUC,EAAAC,cAAe,U,CAG7B,SAASC,EAAgBP,GACrBH,EAAWI,UAAUC,OAAO,YAC5BJ,EAASG,UAAUE,IAAI,YACvBC,EAAUC,EAAAG,YAAa,Q,CAG3B,SAASJ,EAAUK,EAAYC,GAiC3BhB,EAAYiB,UAAY,GA7BxBnB,EAAmBoB,YACnBpB,EAAmBqB,uBAAuBJ,GAC1C,IAAMK,EAAmCL,EAO3BM,KAAI,SAACC,GACf,IAAIC,EAASD,EAAMC,OACfD,EAAMC,OAAOC,OAAS,IACtBD,EAAS,GAAuBE,OAApBH,EAAMC,OAAO,GAAG,MAAoBE,OAAhBH,EAAMC,OAAO,GAAG,YAEpD,IAAMG,EAAe,IAAIC,KAAKL,EAAMI,cACpC,MAAO,2CAEgDD,OADvBH,EAAMM,GAAG,qFACkDH,OAApCH,EAAMO,YAAY,oBAE9BJ,OAFgDH,EAAMQ,MAAM,sJAG/DL,OADGH,EAAMQ,MAAM,wDAELL,OADVF,EAAO,8DAC2DE,OAAxDC,EAAaK,cAAc,+BAA2DN,OAA9BH,EAAMU,aAAaC,QAAQ,GAAG,mE,IAIzIC,KAAK,IAtBRlC,EAAYiB,UAAYG,EACxBT,EAAAwB,mBAA8BrC,EAAoBkB,E,CAzBlDb,EAAWiC,iBAAiB,QAAS/B,GACrCD,EAASgC,iBAAiB,QAASvB,GAJvCR,G","sources":["src/js/library.js"],"sourcesContent":["import { LocalStorageEntry } from \"./local-storage-entry\";\nimport { watchedMovies, queueMovies } from \"./modal-window\";\nimport * as modalUtils from \"./modal-window\";\n\n// console.log(watchedMovies);\n// console.log(queueMovies);\n\nconst currentLibraryPage = new LocalStorageEntry('Current library page');\n\n\nconst galleryList = document.querySelector('ul.gallery');\nconst watchedBtn = document.querySelector('.js-watched-btn');\nconst queueBtn = document.querySelector('.js-queue-btn');\n\n\nonLibraryLoad();\nonWatchedBtnClick();\n\nfunction onLibraryLoad() {\n    watchedBtn.addEventListener('click', onWatchedBtnClick);\n    queueBtn.addEventListener('click', onQueueBtnClick);\n}\n\nfunction onWatchedBtnClick(e) {\n    // console.log(watchedMovies);\n    queueBtn.classList.remove('on-focus');\n    watchedBtn.classList.add('on-focus');\n    addMovies(watchedMovies, 'watched');\n}\n\nfunction onQueueBtnClick(e) {\n    watchedBtn.classList.remove('on-focus');\n    queueBtn.classList.add('on-focus');\n    addMovies(queueMovies, 'queue');\n}\n\nfunction addMovies(moviesList, modeStr) {\n    clearGalleryList();\n    \n\n    currentLibraryPage.clearList();\n    currentLibraryPage.addMovieToLocalStorage(moviesList);\n    const markup = createGalleryMoviesMarkup(moviesList);\n    galleryList.innerHTML = markup;\n    modalUtils.handleGalleryCards(currentLibraryPage, modeStr);\n}\n\n\nfunction createGalleryMoviesMarkup(movies) {\n    return movies.map((movie) => {\n        let genres = movie.genres;\n        if (movie.genres.length > 2) {\n            genres = `${movie.genres[0]}, ${movie.genres[1]}, Other`;\n        };\n        const release_date = new Date(movie.release_date)\n        return `\n            <li class=\"card\" data-id=\"${movie.id}\" data-modal-open>\n                <img src=\"https://image.tmdb.org/t/p/original${movie.poster_path}\" alt=\"Poster \\'${movie.title}\\'\" class=\"card__movie-img\" width=\"200\" height=\"300\">\n                <div class=\"card__info\">\n                    <p class=\"card__movie-title\">${movie.title}</p>\n                    <p class=\"card__add-info\">${genres}\n                    <span class=\"card__span\"> | </span> ${release_date.getFullYear()} <span class=\"value__vote\">${movie.vote_average.toFixed(1)}</span></p>\n                </div>\n            </li>\n        `;\n    }).join('');\n}\n\nfunction clearGalleryList() {\n    galleryList.innerHTML = '';\n}\n"],"names":["$gn8gO","parcelRequire","$93effc6fc56091ad$var$currentLibraryPage","LocalStorageEntry","$93effc6fc56091ad$var$galleryList","document","querySelector","$93effc6fc56091ad$var$watchedBtn","$93effc6fc56091ad$var$queueBtn","$93effc6fc56091ad$var$onWatchedBtnClick","e","classList","remove","add","$93effc6fc56091ad$var$addMovies","$6VMVE","watchedMovies","$93effc6fc56091ad$var$onQueueBtnClick","queueMovies","moviesList","modeStr","innerHTML","clearList","addMovieToLocalStorage","markup","map","movie","genres","length","concat","release_date","Date","id","poster_path","title","getFullYear","vote_average","toFixed","join","handleGalleryCards","addEventListener"],"version":3,"file":"library.854a974b.js.map"}