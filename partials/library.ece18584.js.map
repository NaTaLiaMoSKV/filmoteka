{"mappings":"kpBAsBA,IAAAA,EACAC,E,iJArBA,IAAIC,EAAU,GAoBdF,EAlBA,SAAkBG,GAGhB,IAFA,IAAIC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BJ,EAAQE,EAAKE,IAAMH,EAAMC,EAAKE,G,EAelCL,EAXA,SAAiBO,GACf,IAAIC,EAAWP,EAAQM,GAEvB,GAAgB,MAAZC,EACF,MAAM,IAAIC,MAAM,oCAAsCF,GAGxD,OAAOC,C,KCnBTE,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,sJCAzD,I,EAAAC,EAAAJ,EAAA,S,0BCAAK,EAAiB,IAAAC,IAAoB,MAAQN,EAAA,SAAAO,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,WDKpG,MAAMC,EAAqB,IAAI,EAAAR,EAAAS,mBAAkB,wBAE3CC,EAAcC,SAASC,cAAc,cAErCC,EAAaF,SAASC,cAAc,mBACpCE,EAAWH,SAASC,cAAc,iBAOxC,SAASG,EAAkBC,GACvBF,EAASG,UAAUC,OAAO,YAC1BL,EAAWI,UAAUE,IAAI,YACzBC,EAAUC,EAAAC,cAAe,U,CAS7B,SAASF,EAAUG,EAAMC,GAmCrBd,EAAYe,UAAY,GAjCxBjB,EAAmBkB,YAEnBH,EAAKI,SAAQC,IACTpB,EAAmBqB,uBAAuBD,EAAK,IAGnD,MAAME,EAAmCP,EAM3BQ,KAAKC,IACf,IAAIC,EAASD,EAAMC,OACfD,EAAMC,OAAOzC,OAAS,IACtByC,EAAS,GAAGD,EAAMC,OAAO,OAAOD,EAAMC,OAAO,aAEjD,MAAMC,EAAe,IAAIC,KAAKH,EAAME,cAC9BE,EAASJ,EAAMK,YAAc,sCAAsCL,EAAMK,cAAgBC,EAAArC,GAC/F,MAAO,0CACwB+B,EAAMvC,iDAClB2C,kBAAwBJ,EAAMO,yJAENP,EAAMO,4DACTN,8DACUC,EAAaM,2CAA2CR,EAAMS,aAAaC,QAAQ,oEAGpI,IACFC,KAAK,IAtBRjC,EAAYe,UAAYK,EACxBT,EAAAuB,mBAA8BpC,EAAoBgB,E,CA3BtDT,IAEAF,EAAWgC,iBAAiB,QAAS9B,GACrCD,EAAS+B,iBAAiB,SAQ1B,SAAyB7B,GACrBH,EAAWI,UAAUC,OAAO,YAC5BJ,EAASG,UAAUE,IAAI,YACvBC,EAAUC,EAAAyB,YAAa,Q","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-e84c56d201c4ab38.js","src/js/library.js","node_modules/@parcel/runtime-js/lib/runtime-1c764830a689f414.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"bHX8u\\\":\\\"library.ece18584.js\\\",\\\"5UBio\\\":\\\"not-found.8cc15053.jpg\\\",\\\"7BX6O\\\":\\\"library.96e63728.js\\\"}\"));","import { LocalStorageEntry } from \"./local-storage-entry\";\nimport { watchedMovies, queueMovies } from \"./modal-window\";\nimport * as modalUtils from \"./modal-window\";\nimport imageNotFound from '../images/not-found.jpg'\n\nconst currentLibraryPage = new LocalStorageEntry('Current library page');\n\nconst galleryList = document.querySelector('ul.gallery');\n\nconst watchedBtn = document.querySelector('.js-watched-btn');\nconst queueBtn = document.querySelector('.js-queue-btn');\n\nonWatchedBtnClick();\n\nwatchedBtn.addEventListener('click', onWatchedBtnClick);\nqueueBtn.addEventListener('click', onQueueBtnClick);\n\nfunction onWatchedBtnClick(e) {\n    queueBtn.classList.remove('on-focus');\n    watchedBtn.classList.add('on-focus');\n    addMovies(watchedMovies, 'watched');\n}\n\nfunction onQueueBtnClick(e) {\n    watchedBtn.classList.remove('on-focus');\n    queueBtn.classList.add('on-focus');\n    addMovies(queueMovies, 'queue');\n}\n\nfunction addMovies(list, mode) {\n    clearGalleryList();\n    currentLibraryPage.clearList();\n\n    list.forEach(item => {\n        currentLibraryPage.addMovieToLocalStorage(item);\n    });\n\n    const markup = createGalleryMoviesMarkup(list);\n    galleryList.innerHTML = markup;\n    modalUtils.handleGalleryCards(currentLibraryPage, mode);\n}\n\nfunction createGalleryMoviesMarkup(movies) {\n    return movies.map((movie) => {\n        let genres = movie.genres;\n        if (movie.genres.length > 2) {\n            genres = `${movie.genres[0]}, ${movie.genres[1]}, Other`;\n        };\n        const release_date = new Date(movie.release_date);\n        const poster = movie.poster_path ? `https://image.tmdb.org/t/p/original${movie.poster_path}` : imageNotFound;\n        return `\n            <li class=\"card\" data-id=${movie.id} data-modal-open>\n                <img src=${poster} alt=\"Poster \\'${movie.title}\\'\" class=\"card__movie-img\" width=\"200\" height=\"300\">\n                <div class=\"card__info\">\n                    <p class=\"card__movie-title\">${movie.title}</p>\n                    <p class=\"card__add-info\">${genres}\n                    <span class=\"card__span\"> | </span> ${release_date.getFullYear()} <span class=\"value__vote\">${movie.vote_average.toFixed(1)}</span></p>\n                </div>\n            </li>\n        `;\n    }).join('');\n}\n\nfunction clearGalleryList() {\n    galleryList.innerHTML = '';\n}\nexport { createGalleryMoviesMarkup };","module.exports = new __parcel__URL__(\"../\" + require('./helpers/bundle-manifest').resolve(\"5UBio\")).toString();"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$2GrvB","$63d6c38f6ccdf2f4$exports","URL","resolve","import","meta","url","toString","$1cafa503bc57b7a0$var$currentLibraryPage","LocalStorageEntry","$1cafa503bc57b7a0$var$galleryList","document","querySelector","$1cafa503bc57b7a0$var$watchedBtn","$1cafa503bc57b7a0$var$queueBtn","$1cafa503bc57b7a0$var$onWatchedBtnClick","e","classList","remove","add","$1cafa503bc57b7a0$var$addMovies","$2hTmC","watchedMovies","list","mode","innerHTML","clearList","forEach","item","addMovieToLocalStorage","markup","map","movie","genres","release_date","Date","poster","poster_path","$parcel$interopDefault","title","getFullYear","vote_average","toFixed","join","handleGalleryCards","addEventListener","queueMovies"],"version":3,"file":"library.ece18584.js.map"}