{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,0BAOA,MAAMC,EAAqB,IAAI,EAAAF,EAAAG,mBAAkB,wBAE3CC,EAAcC,SAASC,cAAc,cACrCC,EAAaF,SAASC,cAAc,mBACpCE,EAAWH,SAASC,cAAc,iBASxC,SAASG,EAAkBC,GACvBC,QAAQC,IAAIC,EAAAC,eACZN,EAASO,UAAUC,OAAO,YAC1BT,EAAWQ,UAAUE,IAAI,YACzBC,EAAUL,EAAAC,c,CAGd,SAASK,EAAgBT,GACrBH,EAAWQ,UAAUC,OAAO,YAC5BR,EAASO,UAAUE,IAAI,YACvBC,EAAUL,EAAAO,Y,CAGd,SAASF,EAAUG,GAiCfjB,EAAYkB,UAAY,GA7BxBpB,EAAmBqB,YACnBrB,EAAmBsB,uBAAuBH,GAC1C,MAAMI,EAAkCJ,EAQ1BK,KAAKC,IACXA,EAAMC,OAAOC,OAAS,IACtBF,EAAMC,OAAS,GAAGD,EAAMC,OAAO,OAAOD,EAAMC,OAAO,aAEvD,MAAME,EAAe,IAAIC,KAAKJ,EAAMG,cACpC,MAAO,2CACyBH,EAAMK,sFACiBL,EAAMM,6BAA8BN,EAAMO,yJAEtDP,EAAMO,4DACTP,EAAMC,mEACIE,EAAaK,2CAA2CR,EAAMS,aAAaC,QAAQ,oEAGpI,IACFC,KAAK,IAtBRlC,EAAYkB,UAAYG,EACxBZ,EAAA0B,mBAA8BrC,E,CAzB9BK,EAAWiC,iBAAiB,QAAS/B,GACrCD,EAASgC,iBAAiB,QAASrB","sources":["src/js/library.js"],"sourcesContent":["import { LocalStorageEntry } from \"./local-storage-entry\";\nimport { watchedMovies, queueMovies } from \"./modal-window\";\nimport * as modalUtils from \"./modal-window\";\n\n// console.log(watchedMovies);\n// console.log(queueMovies);\n\nconst currentLibraryPage = new LocalStorageEntry('Current library page');\n\nconst galleryList = document.querySelector('ul.gallery');\nconst watchedBtn = document.querySelector('.js-watched-btn');\nconst queueBtn = document.querySelector('.js-queue-btn');\n\nonLibraryLoad();\n\nfunction onLibraryLoad() {\n    watchedBtn.addEventListener('click', onWatchedBtnClick);\n    queueBtn.addEventListener('click', onQueueBtnClick);\n}\n\nfunction onWatchedBtnClick(e) {\n    console.log(watchedMovies);\n    queueBtn.classList.remove('on-focus');\n    watchedBtn.classList.add('on-focus');\n    addMovies(watchedMovies);\n}\n\nfunction onQueueBtnClick(e) {\n    watchedBtn.classList.remove('on-focus');\n    queueBtn.classList.add('on-focus');\n    addMovies(queueMovies);\n}\n\nfunction addMovies(moviesList) {\n    clearGalleryList();\n    \n\n    currentLibraryPage.clearList();\n    currentLibraryPage.addMovieToLocalStorage(moviesList);\n    const markup = createGalleryCardsMarkup(moviesList);\n    galleryList.innerHTML = markup;\n    modalUtils.handleGalleryCards(currentLibraryPage);\n}\n\n\nfunction createGalleryCardsMarkup(movies) {\n    \n    return movies.map((movie) => {\n        if (movie.genres.length > 2) {\n            movie.genres = `${movie.genres[0]}, ${movie.genres[1]}, Other`;\n        };\n        const release_date = new Date(movie.release_date)\n        return `\n            <li class=\"card\" data-id=\"${movie.id}\" data-modal-open>\n                <img src=\"https://image.tmdb.org/t/p/original${movie.poster_path}\" alt=\"Poster \\'${movie.title}\\'\" class=\"card__movie-img\" width=\"200\" height=\"300\">\n                <div class=\"card__info\">\n                    <p class=\"card__movie-title\">${movie.title}</p>\n                    <p class=\"card__add-info\">${movie.genres}\n                    <span class=\"card__span\"> | </span> ${release_date.getFullYear()} <span class=\"value__vote\">${movie.vote_average.toFixed(1)}</span></p>\n                </div>\n            </li>\n        `;\n    }).join('');\n}\n\nfunction clearGalleryList() {\n    galleryList.innerHTML = '';\n}\n\n\n"],"names":["$2GrvB","parcelRequire","$1cafa503bc57b7a0$var$currentLibraryPage","LocalStorageEntry","$1cafa503bc57b7a0$var$galleryList","document","querySelector","$1cafa503bc57b7a0$var$watchedBtn","$1cafa503bc57b7a0$var$queueBtn","$1cafa503bc57b7a0$var$onWatchedBtnClick","e","console","log","$2hTmC","watchedMovies","classList","remove","add","$1cafa503bc57b7a0$var$addMovies","$1cafa503bc57b7a0$var$onQueueBtnClick","queueMovies","moviesList","innerHTML","clearList","addMovieToLocalStorage","markup","map","movie","genres","length","release_date","Date","id","poster_path","title","getFullYear","vote_average","toFixed","join","handleGalleryCards","addEventListener"],"version":3,"file":"library.e595480c.js.map"}